<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>display posts on feed</title>
</head>
<body>
    
<h2>Welcome <%= user.username %></h2>
<a href="/post">Create Post</a> |
<a href="/logout">Logout</a>
<hr>

<% posts.slice().reverse().forEach(post => { %>
  <div style="border:1px solid black; padding:10px; margin:10px;">
    <strong><%= post.username %></strong>
    <p><%= post.content %></p>

    <% if (post.image) { %>
     <img src="<%= post.image %>" width="200" />" width="200" />
    <% } %>

    <form action="/like/<%= post.id %>" method="POST">
      <button>❤️ Like (<%= post.likes.length %>)</button>
    </form>

    <h4>Comments</h4>
    <% post.comments.forEach(c => { %>
      <p>
        <strong><%= c.username %>:</strong> <%= c.text %>
        <% if (c.username === user.username) { %>
          <form action="/delete-comment/<%= post.id %>/<%= c.id %>" method="POST" style="display:inline;">
            <button>❌</button>
          </form>
        <% } %>
      </p>
    <% }) %>

    <form action="/comment/<%= post.id %>" method="POST">
      <input type="text" name="text" required />
      <button>Comment</button>
    </form>
  </div>
<% }) %>



</body>
</html>